(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{553:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"docker笔记-一-docker入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker笔记-一-docker入门"}},[s._v("#")]),s._v(" Docker笔记（一）：Docker入门")]),s._v(" "),t("h3",{attrs:{id:"_1、什么是docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、什么是docker"}},[s._v("#")]),s._v(" 1、什么是Docker")]),s._v(" "),t("hr"),s._v(" "),t("blockquote",[t("p",[s._v("Docker 提供了在称为容器的松散隔离环境中打包和运行应用程序的能力。隔离和安全性允许您在给定主机上同时运行多个容器。容器是轻量级的，包含运行应用程序所需的一切，因此您无需依赖主机上当前安装的内容。您可以在工作时轻松共享容器，并确保与您共享的每个人都获得以相同方式工作的相同容器。")]),s._v(" "),t("p",[s._v("官方定义: docker是一个容器技术。")])]),s._v(" "),t("h3",{attrs:{id:"_2、为什么是docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、为什么是docker"}},[s._v("#")]),s._v(" 2、为什么是Docker")]),s._v(" "),t("hr"),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("在开发的时候，在本机测试环境可以跑，生产环境跑不起来")])]),s._v(" "),t("p",[s._v("这里我们拿Web应用程序举例，我们一个Web应用程序涉及很多东西，比如mq、es、redis等软件环境。当这些其中某一项版本不一致的时候，可能就会导致应用程序跑不起来这种情况。Docker则将程序以及使用软件环境直接打包在一起，无论在那个机器上保证了环境一致。")]),s._v(" "),t("p",[t("strong",[s._v("优势1:  一致的运行环境,更轻松的迁移")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("服务器自己的程序挂了，结果发现是别人程序出了问题把内存吃完了，自己程序因为内存不够就挂了")])]),s._v(" "),t("p",[s._v("这种也是一种比较常见的情况，如果你的程序重要性不是特别高的话，公司基本上不可能让你的程序独享一台服务器的，这时候你的服务器就会跟公司其他人的程序共享一台服务器，所以不可避免地就会受到其他程序的干扰，导致自己的程序出现问题。Docker就很好解决了环境隔离的问题，别人程序不会影响到自己的程序。")]),s._v(" "),t("p",[t("strong",[s._v("优势2：对进程进行封装隔离,容器与容器之间互不影响,更高效的利用系统资源")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("公司要弄一个活动，可能会有大量的流量进来，公司需要再多部署几十台服务器")])]),s._v(" "),t("p",[s._v("在没有Docker的情况下，要在几天内部署几十台服务器，这对运维来说是一件非常折磨人的事，而且每台服务器的环境还不一定一样，就会出现各种问题，最后部署地头皮发麻。用Docker的话，我只需要将程序打包到镜像，你要多少台服务，我就给力跑多少容器，极大地提高了部署效率。")]),s._v(" "),t("p",[t("strong",[s._v("优势3: 通过镜像复制N多个环境一致容器")])])])]),s._v(" "),t("h3",{attrs:{id:"_3、docker和虚拟机区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、docker和虚拟机区别"}},[s._v("#")]),s._v(" 3、Docker和虚拟机区别")]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("虚拟机是携带操作系统，本身很小的应用程序却因为携带了操作系统而变得非常大，很笨重。Docker是不携带操作系统的，所以Docker的应用就非常的轻巧。另外在调用宿主机的CPU、磁盘等等这些资源的时候，拿内存举例，虚拟机是利用Hypervisor去虚拟化内存，整个调用过程是虚拟内存->虚拟物理内存->真正物理内存，但是Docker是利用Docker Engine去调用宿主的的资源，这时候过程是虚拟内存->真正物理内存。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th"),s._v(" "),t("th",[s._v("传统虚拟机")]),s._v(" "),t("th",[s._v("Docker容器")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("磁盘占用")]),s._v(" "),t("td",[s._v("几个GB到几十个GB左右")]),s._v(" "),t("td",[s._v("几十MB到几百MB左右")])]),s._v(" "),t("tr",[t("td",[s._v("CPU内存占用")]),s._v(" "),t("td",[s._v("虚拟操作系统非常占用CPU和内存")]),s._v(" "),t("td",[s._v("Docker引擎占用极低")])]),s._v(" "),t("tr",[t("td",[s._v("启动速度")]),s._v(" "),t("td",[s._v("（从开机到运行项目）几分钟")]),s._v(" "),t("td",[s._v("（从开启容器到运行项目）几秒")])]),s._v(" "),t("tr",[t("td",[s._v("安装管理")]),s._v(" "),t("td",[s._v("需要专门的运维技术")]),s._v(" "),t("td",[s._v("安装、管理方便")])]),s._v(" "),t("tr",[t("td",[s._v("应用部署")]),s._v(" "),t("td",[s._v("每次部署都费时费力")]),s._v(" "),t("td",[s._v("从第二次部署开始轻松简捷")])]),s._v(" "),t("tr",[t("td",[s._v("耦合性")]),s._v(" "),t("td",[s._v("多个应用服务安装到一起，容易互相影响")]),s._v(" "),t("td",[s._v("每个应用服务一个容器，达成隔离")])]),s._v(" "),t("tr",[t("td",[s._v("系统依赖")]),s._v(" "),t("td",[s._v("无")]),s._v(" "),t("td",[s._v("需求相同或相似的内核，目前推荐是Linux")])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_4-docker的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker的安装"}},[s._v("#")]),s._v(" 4.Docker的安装")]),s._v(" "),t("hr"),s._v(" "),t("h4",{attrs:{id:"_4-1-卸载旧版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-卸载旧版本"}},[s._v("#")]),s._v(" 4.1  卸载旧版本")]),s._v(" "),t("p",[s._v("旧版本的 Docker 被称为"),t("code",[s._v("docker")]),s._v("或"),t("code",[s._v("docker-engine")]),s._v("。如果安装了这些，请卸载它们以及相关的依赖项。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum remove docker "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h4",{attrs:{id:"_4-2-设置存储库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-设置存储库"}},[s._v("#")]),s._v(" 4.2  设置存储库")]),s._v(" "),t("p",[s._v("安装"),t("code",[s._v("yum-utils")]),s._v("包（提供"),t("code",[s._v("yum-config-manager")]),s._v(" 实用程序）并设置"),t("strong",[s._v("稳定")]),s._v("存储库。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\tyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils\n    \n    yum-config-manager "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://download.docker.com/linux/centos/docker-ce.repo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_4-3-安装-docker-引擎"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-安装-docker-引擎"}},[s._v("#")]),s._v(" 4.3  安装 Docker 引擎")]),s._v(" "),t("p",[s._v("1、安装"),t("em",[s._v("最新版本")]),s._v("的 Docker Engine 和 containerd，或者进入下一步安装特定版本：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-cli containerd.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("2、要安装"),t("em",[s._v("特定版本")]),s._v("的 Docker Engine，请在 repo 中列出可用版本，然后选择并安装：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ yum list docker-ce --showduplicates "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -r\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION_STRING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" docker-ce-cli-"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION_STRING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" containerd.io\n$ yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-18.09.5-3.el7 docker-ce-cli-18.09.5-3.el7 containerd.io\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"_4-4-启动-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-启动-docker"}},[s._v("#")]),s._v(" 4.4  启动 Docker")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" systemctl start docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_4-5-验证安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-验证安装"}},[s._v("#")]),s._v(" 4.5  验证安装")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("docker run hello-world\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_5、docker名词"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、docker名词"}},[s._v("#")]),s._v(" 5、Docker名词")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20200404111908085-0291323.png",alt:"image-20200404111908085"}})]),s._v(" "),t("ul",[t("li",[t("code",[s._v("镜像:")]),s._v(" 一个镜像代表一个应用环境,他是一个只读的文件,如 mysql镜像,tomcat镜像,nginx镜像等")]),s._v(" "),t("li",[t("code",[s._v("容器:")]),s._v(" 镜像每次运行之后就是产生一个容器,就是正在运行的镜像,特点就是可读可写")]),s._v(" "),t("li",[t("code",[s._v("仓库:")]),s._v("用来存放镜像的位置,类似于maven仓库,也是镜像下载和上传的位置")]),s._v(" "),t("li",[t("code",[s._v("dockerFile:")]),s._v("docker生成镜像配置文件,用来书写自定义镜像的一些配置")]),s._v(" "),t("li",[t("code",[s._v("tar:")]),s._v("一个对镜像打包的文件,日后可以还原成镜像")])]),s._v(" "),t("h3",{attrs:{id:"_6、镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、镜像加速"}},[s._v("#")]),s._v(" 6、镜像加速")]),s._v(" "),t("h4",{attrs:{id:"_6-1-运行流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-运行流程"}},[s._v("#")]),s._v(" 6.1  运行流程")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20200404120356784.png",alt:"image-20200404120356784"}})]),s._v(" "),t("h4",{attrs:{id:"_6-2-阿里云镜像加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-阿里云镜像加速"}},[s._v("#")]),s._v(" 6.2  阿里云镜像加速")]),s._v(" "),t("p",[s._v("地址：https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /etc/docker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://z3tcuuov.mirror.aliyuncs.com"]\n}\nEOF')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_7、可视化工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、可视化工具"}},[s._v("#")]),s._v(" 7、可视化工具")]),s._v(" "),t("h4",{attrs:{id:"_7-1-安装portainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-安装portainer"}},[s._v("#")]),s._v(" 7.1  安装Portainer")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#docker pull  portainer/portainer")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#docker volume create portainer_data")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);