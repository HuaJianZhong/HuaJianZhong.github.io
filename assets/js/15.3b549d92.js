(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{561:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"elasticsearch基础知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch基础知识"}},[s._v("#")]),s._v(" Elasticsearch基础知识")]),s._v(" "),t("h3",{attrs:{id:"_1、elasticsearch-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、elasticsearch-安装"}},[s._v("#")]),s._v(" 1、Elasticsearch 安装")]),s._v(" "),t("hr"),s._v(" "),t("h4",{attrs:{id:"_1-1-elasticsearch下载安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-elasticsearch下载安装"}},[s._v("#")]),s._v(" 1.1  Elasticsearch下载安装")]),s._v(" "),t("blockquote",[t("p",[s._v("下载地址：https://www.elastic.co/cn/downloads/elasticsearch")])]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20210516225602494.png",alt:"image-20210516225602494"}})]),s._v(" "),t("p",[s._v("解压后，进入 bin 文件目录，点击 elasticsearch.bat 文件启动 ES 服务 。")]),s._v(" "),t("p",[t("code",[s._v("注意")]),s._v("： 9300 端口为 Elasticsearch 集群间组件的通信端口， 9200 端口为浏览器访问的 http协议 RESTful 端口。")]),s._v(" "),t("p",[s._v("打开浏览器，输入地址： http://localhost:9200，测试返回结果，返回结果如下：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PC-20190406SSAP"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cluster_name"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"elasticsearch"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cluster_uuid"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"j-92NA_1Tz-5PTHIjDIDYA"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"number"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"7.8.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_flavor"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_type"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zip"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_hash"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"757314695644ea9a1dc2fecd26d1a43856725e65"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_date"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2020-06-14T19:35:50.234439Z"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build_snapshot"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lucene_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8.5.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"minimum_wire_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.8.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"minimum_index_compatibility_version"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"6.0.0-beta1"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tagline"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"You Know, for Search"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("Elasticsearch 是"),t("strong",[s._v("面向文档型数据库")]),s._v("，一条数据在这里就是一个文档。 将 Elasticsearch 里存储文档数据和关系型数据库 MySQL 存储数据的概念进行一个类比")]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/146a779da01f53e7f7a8d53132d3c7cf.png",alt:"img"}})]),s._v(" "),t("p",[s._v("ES 里的 Index 可以看做一个库，而 Types 相当于表， Documents 则相当于表的行。这里 Types 的概念已经被逐渐弱化， Elasticsearch 6.X 中，一个 index 下已经只能包含一个type， Elasticsearch 7.X 中, Type 的概念已经被删除了。")]),s._v(" "),t("h4",{attrs:{id:"_1-2-kibana下载安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-kibana下载安装"}},[s._v("#")]),s._v(" 1.2   Kibana下载安装")]),s._v(" "),t("blockquote",[t("p",[s._v("Kibana 是一款开源的数据分析和可视化平台，它是 Elastic Stack 成员之一，设计用于和 Elasticsearch 协作。您可以使用 Kibana 对 Elasticsearch 索引中的数据进行搜索、查看、交互操作。您可以很方便的利用图表、表格及地图对数据进行多元化的分析和呈现。")]),s._v(" "),t("p",[s._v("Kibana 可以使大数据通俗易懂。它很简单，基于浏览器的界面便于您快速创建和分享动态数据仪表板来追踪 Elasticsearch 的实时数据变化。")]),s._v(" "),t("p",[s._v("搭建 Kibana 非常简单。您可以分分钟完成 Kibana 的安装并开始探索 Elasticsearch 的索引数据 — 没有代码、不需要额外的基础设施。")]),s._v(" "),t("p",[s._v("下载：https://www.elastic.co/cn/downloads/past-releases/kibana-7-8-0")])]),s._v(" "),t("p",[s._v("修改 config/kibana.yml 文件：")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认端口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5601")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ES 服务器的地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("elasticsearch.hosts")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:9200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 索引名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kibana.index")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('".kibana"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支持中文")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("i18n.locale")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zh-CN"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_2、dsl语句使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、dsl语句使用"}},[s._v("#")]),s._v(" 2、DSL语句使用")]),s._v(" "),t("hr"),s._v(" "),t("h4",{attrs:{id:"_2-1-query-dsl结构化查询介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-query-dsl结构化查询介绍"}},[s._v("#")]),s._v(" 2.1  Query DSL结构化查询介绍")]),s._v(" "),t("p",[s._v("Query DSL是一个Java开源框架用于构建类型安全的SQL查询语句。采用API代替传统的拼接字符串来构造查询语句。目前Querydsl支持的平台包括JPA,JDO，SQL，Java Collections，RDF，Lucene，Hibernate Search。elasticsearch提供了一整套基于JSON的查询DSL语言来定义查询。\nQuery DSL当作是一系列的抽象的查询表达式树(AST)特定查询能够包含其它的查询，(如 bool ), 有些查询能够包含过滤器(如 constant_")]),s._v(" "),t("p",[s._v("score), 还有的可以同时包含查询和过滤器 (如 filtered). 都能够从ES支持查询集合里面选择任意一个查询或者是从过滤器集合里面挑选出任意一个过滤器, 这样的话，我们就可以构造出任意复杂（maybe 非常有趣）的查询了。")]),s._v(" "),t("h4",{attrs:{id:"_2-2-索引操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-索引操作"}},[s._v("#")]),s._v(" 2.2  索引操作")]),s._v(" "),t("h5",{attrs:{id:"_2-2-1-查询所有索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-查询所有索引"}},[s._v("#")]),s._v(" 2.2.1  查询所有索引")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/_cat/indices?v")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526211450897.png",alt:"image-20210526211450897"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-2-删除索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-删除索引"}},[s._v("#")]),s._v(" 2.2.2  删除索引")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/.kibana-event-log-7.8.0-000001")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526211636213.png",alt:"image-20210526211636213"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-3-新增索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-新增索引"}},[s._v("#")]),s._v(" 2.2.3  新增索引")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526211840723.png",alt:"image-20210526211840723"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-4-新增文档数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-新增文档数据"}},[s._v("#")]),s._v(" 2.2.4  新增文档数据")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_doc/2")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"李四",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("22,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "city"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"深圳",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "description"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"李四来自湖北武汉！"')]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526213047902.png",alt:"image-20210526213047902"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-5-替换操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-5-替换操作"}},[s._v("#")]),s._v(" 2.2.5  替换操作")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("PUT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_doc/2")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"张三丰",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "description"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"在武汉读书，家在武汉！在深圳工作！"')]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526213330364.png",alt:"image-20210526213330364"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20210526213356264.png",alt:"image-20210526213356264"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-6-更新操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-6-更新操作"}},[s._v("#")]),s._v(" 2.2.6  更新操作")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("POST")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_doc/2/_update")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('   "doc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"张三丰",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "description"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"在武汉读书，家在武汉！在深圳工作！"')]),s._v("\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526213750915.png",alt:"image-20210526213750915"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20210526213819051.png",alt:"image-20210526213819051"}})]),s._v(" "),t("h5",{attrs:{id:"_2-2-7-删除操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-7-删除操作"}},[s._v("#")]),s._v(" 2.2.7  删除操作")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_doc/2")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526214020118.png",alt:"image-20210526214020118"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"/img/image-20210526214033743.png",alt:"image-20210526214033743"}})]),s._v(" "),t("h4",{attrs:{id:"_2-3-数据查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-数据查询"}},[s._v("#")]),s._v(" 2.3  数据查询")]),s._v(" "),t("h5",{attrs:{id:"_2-3-1-查询所有"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-查询所有"}},[s._v("#")]),s._v(" 2.3.1  查询所有")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询所有")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526214727657.png",alt:"image-20210526214727657"}})]),s._v(" "),t("h5",{attrs:{id:"_2-3-2-根据id查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-根据id查询"}},[s._v("#")]),s._v(" 2.3.2  根据ID查询")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_doc/3")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526214944987.png",alt:"image-20210526214944987"}})]),s._v(" "),t("h5",{attrs:{id:"_2-3-4-排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4-排序"}},[s._v("#")]),s._v(" 2.3.4  排序")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "match_all"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{}")]),s._v("\n  },\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "sort"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("[")]),s._v("\n    {\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "order"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"desc"')]),s._v("\n      }\n    }\n  ]\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526215232578.png",alt:"image-20210526215232578"}})]),s._v(" "),t("h5",{attrs:{id:"_2-3-5-分页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-5-分页"}},[s._v("#")]),s._v(" 2.3.5  分页")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "match_all"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{}")]),s._v("\n  },\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "sort"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("[")]),s._v("\n    {\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "order"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"desc"')]),s._v("\n      }\n    }\n  ],\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "from"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("0,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "size"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("2")]),s._v("\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526215433706.png",alt:"image-20210526215433706"}})]),s._v(" "),t("h4",{attrs:{id:"_2-4-过滤查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-过滤查询"}},[s._v("#")]),s._v(" 2.4  过滤查询")]),s._v(" "),t("h5",{attrs:{id:"_2-4-1-term过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-term过滤"}},[s._v("#")]),s._v(" 2.4.1  term过滤")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#term主要用于分词精确匹配，如字符串、数值、日期等")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "term"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"66"')]),s._v("\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526222913207.png",alt:"image-20210526222913207"}})]),s._v(" "),t("h5",{attrs:{id:"_2-4-2-terms过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-terms过滤"}},[s._v("#")]),s._v(" 2.4.2  terms过滤")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#erms 跟 term 有点类似，但 terms 允许指定多个匹配条件。 如果某个字段指定了多个值，那么文档需要一起去做匹配 。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "terms"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      [\n        66,\n        77\n      ]\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526223130422.png",alt:"image-20210526223130422"}})]),s._v(" "),t("h5",{attrs:{id:"_2-4-3-range-过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-3-range-过滤"}},[s._v("#")]),s._v(" 2.4.3   range 过滤")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#range过滤允许我们按照指定范围查找一批数据。例如我们查询年龄范围")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#过滤-range 范围过滤")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#gt表示> gte表示=>")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#lt表示< lte表示<=")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "range"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "gte"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("35,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "lte"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("57")]),s._v("\n      }\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526224201207.png",alt:"image-20210526224201207"}})]),s._v(" "),t("h5",{attrs:{id:"_2-4-4-exists过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-4-exists过滤"}},[s._v("#")]),s._v(" 2.4.4  exists过滤")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#过滤搜索 exists：是指包含某个域的数据检索")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "exists"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "field"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"address"')]),s._v("\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526224435537.png",alt:"image-20210526224435537"}})]),s._v(" "),t("h5",{attrs:{id:"_2-4-5-bool-过滤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-5-bool-过滤"}},[s._v("#")]),s._v(" 2.4.5   bool 过滤")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#过滤搜索 bool ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#must : 多个查询条件的完全匹配,相当于 and。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#must_not : 多个查询条件的相反匹配，相当于 not。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#should : 至少有一个查询条件匹配, 相当于 or。")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "bool"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "must"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("[")]),s._v("\n        {\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('          "match"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('            "city"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"武汉"')]),s._v("\n          }\n        },\n        {\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('          "range"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('            "age"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('              "gte"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("50,")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('              "lte"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("60")]),s._v("\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526225047394.png",alt:"image-20210526225047394"}})]),s._v(" "),t("h5",{attrs:{id:"_2-5-6-match-all-查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-6-match-all-查询"}},[s._v("#")]),s._v(" 2.5.6  match_all 查询")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查询所有 match_all")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "match_all"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{}")]),s._v("\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h5",{attrs:{id:"_2-5-7-match-查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-7-match-查询"}},[s._v("#")]),s._v(" 2.5.7  match 查询")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#match查询是一个标准查询，不管你需要全文本查询还是精确查询基本上都要用到它。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果你使用 match 查询一个全文本字段，它会在真正查询之前用分析器先分析match一下查询字符：")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "match"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "description"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"武汉"')]),s._v("\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h5",{attrs:{id:"_2-5-8-prefix-查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-8-prefix-查询"}},[s._v("#")]),s._v(" 2.5.8  prefix 查询")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#前缀匹配 prefix")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "prefix"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('        "value"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"赵"')]),s._v("\n      }\n    }\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h5",{attrs:{id:"_2-5-9-multi-match-查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-9-multi-match-查询"}},[s._v("#")]),s._v(" 2.5.9   multi_match 查询")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#multi_match查询允许你做match查询的基础上同时搜索多个字段，在多个字段中同时查一个")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#多个域匹配搜索")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("GET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("/user/_search")]),s._v("\n{\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('  "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('    "multi_match"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "query"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('"深圳",')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v('      "fields"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("[")]),s._v('\n        "city",\n        "description"\n      ]\n    }\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[t("img",{attrs:{src:"/img/image-20210526225653887.png",alt:"image-20210526225653887"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);